---

layout: post
title: centOS服务器部署
description: 利用centOS服务器部署
keywords: centOS,服务器部署
category: yum

---

##重启系统
`reboot`
##JDK  
下载地址  
`http://www.oracle.com/technetwork/java/javase/downloads/index.html`     
获取真实地址   
`http://download.oracle.com/otn-pub/java/jdk/7u60-b19/jdk-7u60-linux-x64.rpm?AuthParam=1402828126_1f9972f80e53983d3e83b549d51fb394`  
用wget下载   
`wget -O jdk-7u60-linux-x64.rpm http://download.oracle.com/otn-pub/java/jdk/7u60-b19/jdk-7u60-linux-x64.rpm?AuthParam=1402828126_1f9972f80e53983d3e83b549d51fb394`  
修改文件名称       
`mv jdk-7u60-linux-x64.rpm jdk-7-linux-x64.rpm`  
更改文件权限       
`chmod 755 jdk-7u60-linux-x64.rpm `   
安装     
`rpm -ivh jdk-7u60-linux-x64.rpm`  
删除文件    
`rm  jdk-7u60-linux-x64.rpm`  
配置java-home  
查询java版本 java -version  如果版本不对则配置java-home   
打开文件/etc/profile    
在profile文件末尾加入：       

	export JAVA_HOME=/usr/java/jdk1.7.0_60  
	export PATH=$JAVA_HOME/bin:$PATH   
	export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  
 
重启登录       
##Mysql
安装mysql      
`yum install mysql mysql-server mysql-devel `     
启动mysql    
`service mysqld start `     
设置mysql密码    

	mysql
	mysql>; USE mysql;   
	mysql>; UPDATE user SET Password=PASSWORD('123456') WHERE user='root';   
	mysql>; FLUSH PRIVILEGES;
  
设置允许远程登录      

	mysql -u root -p   
	Enter Password: <your new password>   
	mysql>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;   
	mysql>FLUSH   PRIVILEGES;   
 
设为开机启动      
`chkconfig mysqld on ` 

##Apache   
安装Apache     
`yum install httpd httpd-devel`  
卸载    
`yum -y remove httpd*`  
启动apache  
`service httpd start`   
设为开机启动   
`chkconfig httpd on`    
配置 文件位置/etc/httpd/conf/httpd.conf  
设置虚拟主机目录  
在文件的最后添加  

	Listen 9999  
	NameVirtualHost *:9999  
	<VirtualHost *:9999>  
		ServerName localhost:9999  
		DocumentRoot "/data/staticFile"  
	</VirtualHost> 

##Tomcat
安装tomcat  
`yum -y install tomcat6`   
启动tomcat  
`service tomcat6 start `  
设为开机启动   
`chkconfig tomcat6 on`   
默认的tomcat文件夹路径  
`/usr/share/tomcat6`  
配置(tomcat/conf/server.xml)

	<Host name="localhost"  appBase="webapps" unpackWARs="true" autoDeploy="true">  
		</Host>  
	<Host name="www.aa.com"  appBase="webapps" unpackWARs="true" autoDeploy="true">  
        <Alias>www.aa.com</Alias>  
        <Context path="" docBase="/data/webapps/aa" debug="0"/>  
	</Host>  
	<Host name="www.bb.com"  appBase="webapps" unpackWARs="true" autoDeploy="true">  
        <Alias>www.bb.com</Alias>  
        <Context path="" docBase="/data/webapps/bb" debug="0"/>  
	</Host>  


##防火墙
文件路径/etc/sysconfig/iptables(可能不存在,自己新建个就行)
我的配置

	# Generated by iptables-save v1.4.7 on Fri Jun 27 15:46:01 2014  
	*filter  
	:INPUT ACCEPT [0:0]  
	:FORWARD ACCEPT [0:0]  
	:OUTPUT ACCEPT [5:748]  
	-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT   
	-A INPUT -p icmp -j ACCEPT   
	-A INPUT -i lo -j ACCEPT   
	-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT   
	-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT   
	-A INPUT -p tcp -m state --state NEW -m tcp --dport 8080 -j ACCEPT   
	-A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT   
	-A INPUT -p tcp -m state --state NEW -m tcp --dport 9999 -j ACCEPT   
	-A FORWARD -j REJECT --reject-with icmp-host-prohibited   
	COMMIT  
	# Completed on Fri Jun 27 15:46:01 2014  
	# Generated by iptables-save v1.4.7 on Fri Jun 27 15:46:01 2014  
	*nat  
	:PREROUTING ACCEPT [35:1782]  
	:POSTROUTING ACCEPT [107:8216]  
	:OUTPUT ACCEPT [107:8216]  
	-A PREROUTING -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8080   
	COMMIT  
	# Completed on Fri Jun 27 15:46:01 2014 
 
端口允许  

	iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT   
	iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT   
	iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 8080 -j ACCEPT   
	iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT  

端口转发  
`iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080 `   
配置保存  
`service iptables save`    
防火墙启动  
`service iptables start`    
防火墙开机启动  
`chkconfig iptables on`  